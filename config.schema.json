{
  "pluginAlias": "BlinkCameras",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Blink cameras integration for HomeKit via Homebridge. Provides SecuritySystem arm/disarm, motion sensors, and doorbell notifications.",
  "footerDisplay": "For help, see the [README](https://github.com/your-username/homebridge-blinkcameras#readme).",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "description": "Name for this Blink platform instance",
        "type": "string",
        "default": "Blink",
        "required": true
      },
      "username": {
        "title": "Blink Account Email",
        "description": "Your Blink account email address",
        "type": "string",
        "format": "email",
        "required": true
      },
      "password": {
        "title": "Blink Account Password",
        "description": "Your Blink account password",
        "type": "string",
        "required": true
      },
      "deviceId": {
        "title": "Device ID",
        "description": "Unique identifier for this Homebridge instance (sent to Blink as hardware_id)",
        "type": "string",
        "default": "homebridge-blink",
        "required": false
      },
      "deviceName": {
        "title": "Device Name",
        "description": "Friendly name for this device (fallback for Device ID)",
        "type": "string",
        "required": false
      },
      "twoFactorCode": {
        "title": "Two-Factor Code",
        "description": "2FA code for initial login. Only needed if Blink sends a verification code. Remove after successful login.",
        "type": "string",
        "required": false
      },
      "tier": {
        "title": "Blink Environment",
        "description": "Blink API environment tier. Use 'prod' for production (default).",
        "type": "string",
        "default": "prod",
        "required": false,
        "oneOf": [
          { "title": "Production", "enum": ["prod"] },
          { "title": "Staging (SQA1)", "enum": ["sqa1"] },
          { "title": "CEMP", "enum": ["cemp"] }
        ]
      },
      "pollInterval": {
        "title": "Poll Interval (seconds)",
        "description": "How often to poll Blink for state changes. Minimum 15 seconds.",
        "type": "integer",
        "default": 60,
        "minimum": 15,
        "maximum": 600,
        "required": false
      },
      "motionTimeout": {
        "title": "Motion Timeout (seconds)",
        "description": "How long motion detected state stays active before resetting",
        "type": "integer",
        "default": 30,
        "minimum": 5,
        "maximum": 300,
        "required": false
      },
      "enableMotionPolling": {
        "title": "Enable Motion Detection",
        "description": "Poll for motion events via media API. Disable to reduce API calls.",
        "type": "boolean",
        "default": true,
        "required": false
      },
      "excludeDevices": {
        "title": "Excluded Devices",
        "description": "List of device serial numbers, IDs, or names to exclude from HomeKit. Useful for hiding devices you don't want to control.",
        "type": "array",
        "items": {
          "type": "string",
          "title": "Device Identifier"
        },
        "required": false
      },
      "deviceNames": {
        "title": "Custom Device Names",
        "description": "Override display names for devices in HomeKit. Key is the device serial number or ID, value is the custom name.",
        "type": "object",
        "additionalProperties": {
          "type": "string"
        },
        "required": false
      },
      "deviceSettings": {
        "title": "Per-Device Settings",
        "description": "Override settings for specific devices. Key is the device serial number or ID.",
        "type": "object",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "motionTimeout": {
              "type": "integer",
              "minimum": 5,
              "maximum": 300,
              "description": "Motion timeout in seconds for this device"
            },
            "enableMotion": {
              "type": "boolean",
              "description": "Enable/disable motion detection for this device"
            }
          }
        },
        "required": false
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Account Settings",
      "items": [
        "name",
        "username",
        {
          "key": "password",
          "type": "password"
        },
        "twoFactorCode"
      ]
    },
    {
      "type": "fieldset",
      "title": "Device Identification",
      "expandable": true,
      "expanded": false,
      "items": [
        "deviceId",
        "deviceName"
      ]
    },
    {
      "type": "fieldset",
      "title": "Polling Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "pollInterval",
        "motionTimeout",
        "enableMotionPolling"
      ]
    },
    {
      "type": "fieldset",
      "title": "Device Customization",
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "key": "excludeDevices",
          "type": "array",
          "buttonText": "Add Device to Exclude"
        },
        "deviceNames",
        "deviceSettings"
      ]
    },
    {
      "type": "fieldset",
      "title": "Advanced",
      "expandable": true,
      "expanded": false,
      "items": [
        "tier"
      ]
    }
  ]
}
